#
# This file configures the NewRelic Agent.  Place a copy of this file
# in RAILS_ROOT/config and edit the settings as appropriate.
#
common: &default_settings
  log_level: debug
  host: localhost
  api_host: localhost
  port: 3000
  app_name: Unit Test
  enable_auto_app_naming: false
  app_renaming:
    App1: App12
    App2: App12
    App3: App4

  wait_for_rpm_connect: false

  cross_application_tracer:
    enabled: true

  # activemerchant instrumentation: only report dollar amounts (business data)
  # if the following is present and true; otherwise, only response times
  # and throughput to the gateway are reported
  capture_business_data: true
  
  enable_custom_tracing: true
  ignored_params: password, credit_card_number
  
  profiler:
    enabled: true
    
  jmx:
    enabled: true
  
  # checks for loading classes on the background thread
  check_bg_loading: true
  
  # these turn on  experimental database only AR instrumentation
  skip_ar_instrumentation: true
  db_only_ar_instrumentation: true  

  capture_params: true

  # This is the key generated by script/create_admin
  license_key: 'bootstrap_newrelic_admin_license_key_000'
  transaction_tracer:
    enabled: true
    record_sql: raw
    transaction_threshold: 0.1 
    explain_threshold: 0.1
    explain_enabled: true
    stack_trace_threshold: 0.1
     
    # experimental
    random_sample: true
    frustrating: true
    
  error_collector:
    enabled: true
    capture_source: true
    exception_handlers:
      - !exception_handler [ "test/newrelic/test/agent/ExceptionHandlerTest$ExceptionHandler", "handleException", "(Ljava/lang/Exception;)V" ]
      - !exception_handler [ "test/newrelic/test/agent/ExceptionHandlerTest$ExceptionHandler", "handleException", "(Ljava/lang/String;Ljava/lang/Throwable;)V" ]
      - !exception_handler [ "test/newrelic/test/agent/ExceptionHandlerTest$ExceptionHandler", "handleSpecialException", "(Ljava/lang/RuntimeException;Ljava/lang/String;)V" ]
      - test/newrelic/test/agent/ExceptionHandlerTest$ExceptionHandler.handleException2(Ljava/lang/String;Ljava/lang/Throwable;)V
    
  class_transformer:
    includes: com/newrelic/.*Test
    trace_annotation_class_name: test.newrelic.test.agent.TraceAnnotationTest$CustomTrace
    com.newrelic.agent.instrumentation.pointcuts.ConcurrentCallablePointCut:
      enabled: true
    socket_input_stream:
      enabled: true
      
development:
  <<: *default_settings
  enabled: true
  developer: true
  apdex_t: 1.0
test:
  <<: *default_settings
  enabled: false
  developer: true
  monitor_daemons: false
  
# these are the settings that the server will use in
# the load test scenario
load_test:
  <<: *default_settings
  log_level: debug
  enabled: true
  error_collector:
    enabled: false
  

production:
  <<: *default_settings
  host: nope.example.invalid
  port: 80
  license_key: 'deadbeefcafebabe8675309babecafe1beefdead'
  enabled: true
  apdex_t: 1.0
  api_host: nope.example.invalid
  auto_app_naming_suffix: ' (Prod)'


