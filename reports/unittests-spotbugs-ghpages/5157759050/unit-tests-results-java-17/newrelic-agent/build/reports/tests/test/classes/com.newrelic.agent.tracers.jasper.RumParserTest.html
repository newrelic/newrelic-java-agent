<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"/>
<title>Test results - Class com.newrelic.agent.tracers.jasper.RumParserTest</title>
<link href="../css/base-style.css" rel="stylesheet" type="text/css"/>
<link href="../css/style.css" rel="stylesheet" type="text/css"/>
<script src="../js/report.js" type="text/javascript"></script>
</head>
<body>
<div id="content">
<h1>Class com.newrelic.agent.tracers.jasper.RumParserTest</h1>
<div class="breadcrumbs">
<a href="../index.html">all</a> &gt; 
<a href="../packages/com.newrelic.agent.tracers.jasper.html">com.newrelic.agent.tracers.jasper</a> &gt; RumParserTest</div>
<div id="summary">
<table>
<tr>
<td>
<div class="summaryGroup">
<table>
<tr>
<td>
<div class="infoBox" id="tests">
<div class="counter">1</div>
<p>tests</p>
</div>
</td>
<td>
<div class="infoBox" id="failures">
<div class="counter">0</div>
<p>failures</p>
</div>
</td>
<td>
<div class="infoBox" id="ignored">
<div class="counter">0</div>
<p>ignored</p>
</div>
</td>
<td>
<div class="infoBox" id="duration">
<div class="counter">0.451s</div>
<p>duration</p>
</div>
</td>
</tr>
</table>
</div>
</td>
<td>
<div class="infoBox success" id="successRate">
<div class="percent">100%</div>
<p>successful</p>
</div>
</td>
</tr>
</table>
</div>
<div id="tabs">
<ul class="tabLinks">
<li>
<a href="#tab0">Tests</a>
</li>
<li>
<a href="#tab1">Standard output</a>
</li>
</ul>
<div id="tab0" class="tab">
<h2>Tests</h2>
<table>
<thead>
<tr>
<th>Test</th>
<th>Duration</th>
<th>Result</th>
</tr>
</thead>
<tr>
<td class="success">checkAllFiles</td>
<td class="success">0.451s</td>
<td class="success">passed</td>
</tr>
</table>
</div>
<div id="tab1" class="tab">
<h2>Standard output</h2>
<span class="code">
<pre>2023-06-02T17:59:09,353+0000 [44972 1] com.newrelic INFO: Using configured collector host: no-collector.example.com
2023-06-02T17:59:09,388+0000 [44972 1] com.newrelic INFO: Using default metric ingest URI: https://metric-api.newrelic.com/metric/v1
2023-06-02T17:59:09,397+0000 [44972 1] com.newrelic INFO: Using default event ingest URI: https://insights-collector.newrelic.com/v1/accounts/events
2023-06-02T17:59:14,466+0000 [44972 1] com.newrelic.agent.extension.ExtensionService ERROR: Unable to read extensions from the agent jar : java.io.FileNotFoundException: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/classes/java/main (Is a directory)
2023-06-02T17:59:14,599+0000 [44972 1] com.newrelic INFO: Using default collector host: collector.newrelic.com
2023-06-02T17:59:14,600+0000 [44972 1] com.newrelic INFO: Using default metric ingest URI: https://metric-api.newrelic.com/metric/v1
2023-06-02T17:59:14,601+0000 [44972 1] com.newrelic INFO: Using default event ingest URI: https://insights-collector.newrelic.com/v1/accounts/events
2023-06-02T17:59:14,670+0000 [44972 1] com.newrelic.agent.config.ConfigServiceImpl WARN: The apdex_t setting is obsolete and is ignored! Set the apdex_t value for an application in New Relic UI
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/script_before_meta.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script language=&quot;javascript&quot;&gt;    function openTheVideo { }    &lt;/script&gt;&lt;!-- It has been acknowledged that our current parsing implementation will put theheader tag above the first script tag even if the IE tag is present later on. Thiscould break in some IE browsers. --&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=7&quot; /&gt;&lt;meta name=&quot;google-site-verification&quot;    content=&quot;H7LxlilrDfbkX34sqq1X1JwoSCX0c6v15HhUYx49YtE&quot; /&gt;&lt;meta name=&quot;msvalidate.01&quot; content=&quot;9174ACA637FC44E24AD81253FF836544&quot; /&gt;&lt;script language=&quot;javascript&quot;&gt;    function openTheOtherVideo { }    &lt;/script&gt;&lt;anotherTag&gt;OPT&amp;reg;&lt;/anotherTag&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;This is a test&lt;/p&gt;    
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/noheadscriptbody.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;body&gt;	&lt;script type=&quot;text/javascript&quot;&gt;        var setup = function() {        content = '&lt;' + '!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;' +                                    '&lt;html&gt;' +                                    '&lt;body&gt;&lt;title&gt;Title&lt;/title&gt;&lt;/body&gt;' +                                    '&lt;script type=&quot;text/javascript&quot;&gt;'                                    &lt;/script&gt;	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/comments2.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;!-- &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=7&quot; /&gt;    --&gt;&lt;!--    this is a comment    &lt;META name=&quot;y_key&quot; content=&quot;fa8a87d87826e3f6&quot; /&gt;    --&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;meta name=&quot;google-site-verification&quot;    content=&quot;H7LxlilrDfbkX34sqq1X1JwoSCX0c6v15HhUYx49YtE&quot; /&gt;&lt;meta name=&quot;msvalidate.01&quot; content=&quot;9174ACA637FC44E24AD81253FF836544&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script language=&quot;javascript&quot;&gt;    function openMariaVideo { }    &lt;/script&gt;&lt;anotherTag&gt;OPT&amp;reg;&lt;/anotherTag&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;Cribbed from the Java agent&lt;/p&gt;    
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/x_ua_meta_tag_with_spaces.html
Actual:
&lt;html&gt;&lt;head&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;META    http-equiv='x-ua-compatible'     content=&quot;IE=edge,chrome=1&quot;       /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;	junk&lt;/script&gt;&lt;/head&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/x_ua_meta_tag.html
Actual:
&lt;html&gt;&lt;head&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;	junk&lt;/script&gt;&lt;/head&gt;&lt;body&gt;	im some body text	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/script3.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;anotherTag&gt;Castor &lt;/anotherTag&gt;&lt;/head&gt;&lt;body&gt;    &lt;SCRIPT language=&quot;javascript&quot;&gt;        var strFrameInfoWrapper = &quot;&quot;;        strFrameInfoWrapper += &quot;&lt;body style='overflow-y:hidden;padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;' &gt;&quot;;        strFrameInfoWrapper += &quot;&lt;div id='communicationsButton' style='display:none; position: absolute; z-index: 9999; right:0px; top:-2px; cursor: hand;'&gt;&quot;;        strFrameInfoWrapper += &quot;&lt;/div&gt;&quot;;        strFrameInfoWrapper += &quot;&lt;/body&gt;&quot;;    &lt;/SCRIPT&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/no_script_end.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=7&quot; /&gt;&lt;meta name=&quot;google-site-verification&quot;    content=&quot;H7LxlilrDfbkX34sqq1X1JwoSCX0c6v15HhUYx49YtE&quot; /&gt;&lt;meta name=&quot;msvalidate.01&quot; content=&quot;9174ACA637FC44E24AD81253FF836544&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script language=&quot;javascript&quot;/&gt;&lt;script language=&quot;javascript&quot;&gt;    function openTheOtherVideo { }    &lt;/script&gt;&lt;anotherTag&gt;OPT&amp;reg;&lt;/anotherTag&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;This is a test&lt;/p&gt;    
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/scriptDuringHead.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;Insert title here&lt;/title&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;  hello&lt;/script&gt;&lt;/head&gt;&lt;body&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/gt_in_single_quotes_mismatch.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;meta name='google-site-verification'	content='H7LxlilrDfbkX34sqq1X1JwoSCX0c6v15HhUYx49YtE\' /&gt;&lt;meta name='m s&lt;validate&gt;.01'	content='9174ACA637FC44E24AD81253FF836544\' /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script language=&quot;javascript&quot;&gt;      function openMariaVideo { }    &lt;/script&gt;&lt;anotherTag&gt;OPT&amp;reg;&lt;/title&gt;&lt;/anotherTag&gt;&lt;/head&gt;&lt;body&gt;	&lt;h1&gt;blabla&lt;/h1&gt;	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/no_start_header.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/head&gt;&lt;body&gt;Cribbed from the Java agent 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/script_after_body.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=7&quot; /&gt;&lt;meta name=&quot;google-site-verification&quot;	content=&quot;H7LxlilrDfbkX34sqq1X1JwoSCX0c6v15HhUYx49YtE&quot; /&gt;&lt;meta name=&quot;msvalidate.01&quot; content=&quot;9174ACA637FC44E24AD81253FF836544&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;anotherTag&gt;OPT&amp;reg;&lt;/anotherTag&gt;&lt;/head&gt;&lt;body&gt;	&lt;p&gt;This is a test&lt;/p&gt;	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;script language=&quot;javascript&quot;&gt;    function helloIAmAScript { }    &lt;/script&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/scriptinbody.html
Actual:
&lt;head&gt;&lt;meta tada /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/head&gt;&lt;body&gt;	&lt;script type=&quot;text/javascript&quot;&gt;        var setupAdAgility = function() {        var agIframe, adAgilityPlaceHolder, agIframeContent, agZoneId;        agIframeContent = '&lt;' + '!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;' +                                    '&lt;html&gt;' +                                    '&lt;body&gt;&lt;title&gt;AdAgility&lt;/title&gt;&lt;/body&gt;' +                                    '&lt;script type=&quot;text/javascript&quot;&gt;'                                    &lt;/script&gt;	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/header_and_no_head.html
Actual:
&lt;html&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta some-thing=&quot;1&quot; /&gt;&lt;script&gt;	junk&lt;/script&gt;&lt;header&gt;a header&lt;/header&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/charset_tag.html
Actual:
&lt;html&gt;&lt;head&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta some-thing=&quot;1&quot; /&gt;&lt;meta charset=&quot;utf-8&quot;&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/head&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/gt_in_single_quotes1.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;meta name='google-site-verification'	content='H7LxlilrDfbkX34sqq1X1JwoSCX0c6v15HhUYx49YtE\' /&gt;&lt;meta name='meta&lt;validate&gt;.01'	content='9174ACA637FC44E24AD81253FF836544\' /&gt;&lt;!-- &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=7&quot; /&gt;    --&gt;&lt;!--    this is a comment    &lt;META name=&quot;y_key&quot; content=&quot;fa8a87d87826e3f6&quot; /&gt;    --&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;anotherTag&gt;OPT&amp;reg;&lt;/title&gt;&lt;/anotherTag&gt;&lt;script language=&quot;javascript&quot;&gt;      function openMariaVideo { }    &lt;/script&gt;&lt;/head&gt;&lt;body&gt;	&lt;p&gt;Cribbed from the Java agent&lt;/p&gt;	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/function_with_body.html
Actual:
&lt;script&gt;	var messages = [];	function issueInHere(cmsId, previewSelector) {		var html = $.ajax({			timeout : 1000,		});		if ((html != undefined) &amp;&amp; (html.responseText != undefined)) {			var doc = document.getElementById(name).contentWindow.document;			doc.open();			doc.write(&quot;&lt;html&gt;&lt;body&gt;&lt;div id='theid'&gt;&quot; + html.responseText					+ &quot;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;);			doc.close();		} else {			var doc = document.getElementById(name).contentWindow.document;			doc.open();			doc.write(&quot;&lt;html&gt;&lt;body&gt;&lt;div id='theid'&gt;&amp;nbsp;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;);			doc.close();		}	}&lt;/script&gt;&lt;div class=&quot;css-stuff&quot;&gt;	&lt;div class=&quot;title bla&quot;&gt;Messages&lt;/div&gt;	&lt;div class=&quot;subtitle bla&quot;&gt;Message Here&lt;/div&gt;&lt;/div&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/rum_loader_insertion_location.html
Actual:
&lt;html&gt;&lt;head&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;META http-equiv='x-ua-compatible' content=&quot;IE=edge,chrome=1&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;	junk&lt;/script&gt;&lt;/head&gt;&lt;body&gt;im some body text
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/gt_in_quotes1.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;meta name=&quot;google-site-verification&quot;	content=&quot;H7LxlilrDfbkX34sqq1X1JwoSCX0c6v15HhUYx49YtE&quot; /&gt;&lt;meta name=&quot;ms&lt;validate&gt;.01&quot; content=&quot;9174ACA637FC44E24AD81253FF836544&quot; /&gt;&lt;!-- &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=7&quot; /&gt;    --&gt;&lt;!--    this is a comment    &lt;META name=&quot;y_key&quot; content=&quot;fa8a87d87826e3f6&quot; /&gt;    --&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script language=&quot;javascript&quot;&gt;    function openMariaVideo { }    &lt;/script&gt;&lt;anotherTag&gt;OPT&amp;reg;&lt;/title&gt;&lt;/anotherTag&gt;&lt;/head&gt;&lt;body&gt;Cribbed from the Java agent 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/charset_tag_before_xua.html
Actual:
&lt;html&gt;&lt;head&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;	junk&lt;/script&gt;&lt;/head&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/script_no_end_tag2.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;!-- It has been acknowledged that our current parsing implementation will notput the footer tag in this html. The standard way to include a script is withthe head script and footer script tag. http://www.w3.org/TR/html4/interact/scripts.htmlhttp://www.w3.org/TR/xhtml1/#C_3 --&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=7&quot; /&gt;&lt;meta name=&quot;google-site-verification&quot;    content=&quot;H7LxlilrDfbkX34sqq1X1JwoSCX0c6v15HhUYx49YtE&quot; /&gt;&lt;meta name=&quot;msvalidate.01&quot; content=&quot;9174ACA637FC44E24AD81253FF836544&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script language=&quot;javascript&quot;/&gt;&lt;anotherTag&gt;OPT&amp;reg;&lt;/anotherTag&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;This is a test&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/script1.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;anotherTag&gt;Castor &lt;/anotherTag&gt;&lt;/head&gt;&lt;body&gt;	&lt;script language=&quot;javascript&quot;&gt;		var strFrameInfoWrapper = &quot;&quot;;		strFrameInfoWrapper += &quot;&lt;body style='overflow-y:hidden;padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;' &gt;&quot;;		strFrameInfoWrapper += &quot;&lt;div id='communicationsButton' style='display:none; position: absolute; z-index: 9999; right:0px; top:-2px; cursor: hand;'&gt;&quot;;		strFrameInfoWrapper += &quot;&lt;/div&gt;&quot;;		strFrameInfoWrapper += &quot;&lt;/body&gt;&quot;;	&lt;/script&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/headPlusScript.html
Actual:
&lt;head&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script type=&quot;text/javascript&quot;&gt;        var setupAdAgility = function() {        var agIframe, adAgilityPlaceHolder, agIframeContent, agZoneId;        agIframeContent = '&lt;' + '!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;' +                                    '&lt;html&gt;' +                                    '&lt;head&gt;&lt;title&gt;AdAgility&lt;/title&gt;&lt;/head&gt;' +                                    '&lt;script type=&quot;text/javascript&quot;&gt;'
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/charset_tag_after_xua.html
Actual:
&lt;html&gt;&lt;head&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;&lt;meta charset=&quot;utf-8&quot;&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;	junk&lt;/script&gt;&lt;/head&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/scriptBeforeHead.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;script type=&quot;text/javascript&quot;&gt;	&lt;head&gt;&lt;/head&gt;&lt;/script&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;Insert title here&lt;/title&gt; 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/head&gt;&lt;body&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/incomplete_non_meta_tags.html
Actual:
&lt;html&gt;&lt;head&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;link href=&quot; /&gt;&lt;link href= /&gt;&lt;/head&gt;&lt;body&gt;	&lt;p&gt;Cribbed from the Java agent&lt;/p&gt;	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/charset_diff_from_other_agents.html
Actual:
=&lt;html&gt;&lt;head&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta some-thing=&quot;1&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;	junk&lt;/script&gt;&lt;!-- The java agent currently places its tag before the first script tag.Therefore we will be before the charset utf-8 tag. --&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;/head&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/script2.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;title&gt;Castor&lt;/title&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/head&gt;&lt;body&gt;	&lt;script language=&quot;javascript&quot;&gt;		var strFrameInfoWrapper = &quot;&quot;;		strFrameInfoWrapper += &quot;&lt;body style='overflow-y:hidden;padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;' &gt;&quot;;		strFrameInfoWrapper += &quot;&lt;div id='communicationsButton' style='display:none; position: absolute; z-index: 9999; right:0px; top:-2px; cursor: hand;'&gt;&quot;;		strFrameInfoWrapper += &quot;&lt;/div&gt;&quot;;		strFrameInfoWrapper += &quot;&lt;/body&gt;&quot;;	&lt;/script&gt;	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/x_ua_meta_tag_with_others.html
Actual:
&lt;html&gt;&lt;head&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;&lt;meta name=&quot;keywords&quot; content=&quot;testing,rum,insertion&quot;&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;	junk&lt;/script&gt;&lt;/head&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/no_header.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;body&gt;	&lt;p&gt;Cribbed from the Java agent&lt;/p&gt;	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/head_and_header.html
Actual:
&lt;html&gt;&lt;head alpha=&quot;beta&quot; beta=&quot;gamma&quot;&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta some-thing=&quot;1&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;	junk&lt;/script&gt;&lt;/head&gt;&lt;header&gt;a header&lt;/header&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/onlyscript.html
Actual:
&lt;script type=&quot;text/javascript&quot;&gt;        var setup = function() {        daContent = '&lt;' + '!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;' +                                    '&lt;html&gt;' +                                    '&lt;head&gt;&lt;title&gt;TaDa&lt;/title&gt;' +                                    '&lt;script type=&quot;text/javascript&quot;&gt;'
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/charset_tag_with_spaces.html
Actual:
&lt;html&gt;&lt;head&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta some-thing=&quot;1&quot; /&gt;&lt;meta charset=&quot;utf-8&quot;&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/head&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/very_basic.html
Actual:
&lt;html&gt;&lt;head&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta some-thing=&quot;1&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/head&gt;&lt;body&gt;	&lt;p&gt;im some body text&lt;/p&gt;	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/no_html_and_no_header.html
Actual:
&lt;body&gt;This isn't great HTML but it's what we've got.	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/head_with_attributes.html
Actual:
&lt;html&gt;&lt;head alpha=&quot;beta&quot; beta=&quot;gamma&quot;&gt;&lt;title&gt;im a title&lt;/title&gt;&lt;meta some-thing=&quot;1&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;	junk&lt;/script&gt;&lt;/head&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/scriptwithbodyinside.html
Actual:
&lt;head&gt;&lt;meta tada /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script type=&quot;text/javascript&quot;&gt;        var setup = function() {        content = '&lt;' + '!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;' +                                    '&lt;html&gt;' +                                    '&lt;body&gt;&lt;title&gt;DaTitle&lt;/title&gt;&lt;/body&gt;' +                                    '&lt;script type=&quot;text/javascript&quot;&gt;'                                    &lt;/script&gt;&lt;/head&gt;&lt;body&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/x_ua_meta_tag_spaces_around_equals.html
Actual:
&lt;html&gt;&lt;head&gt;  &lt;title&gt;im a title&lt;/title&gt;  &lt;meta http-equiv=  &quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script&gt;	junk  &lt;/script&gt;&lt;/head&gt;&lt;body&gt;im some body text 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/comments1.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;meta name=&quot;google-site-verification&quot;	content=&quot;H7LxlilrDfbkX34sqq1X1JwoSCX0c6v15HhUYx49YtE&quot; /&gt;&lt;meta name=&quot;msvalidate.01&quot; content=&quot;9174ACA637FC44E24AD81253FF836544&quot; /&gt;&lt;!-- &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=7&quot; /&gt;    --&gt;&lt;!--    this is a comment    &lt;META name=&quot;y_key&quot; content=&quot;fa8a87d87826e3f6&quot; /&gt;    --&gt;
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script language=&quot;javascript&quot;&gt;    function openMariaVideo { }    &lt;/script&gt;&lt;anotherTag&gt;OPT&amp;reg;&lt;/anotherTag&gt;&lt;/head&gt;&lt;body&gt;	&lt;p&gt;Cribbed from the Java agent&lt;/p&gt;	
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
Processing File: /home/runner/work/newrelic-java-agent/newrelic-java-agent/newrelic-agent/build/resources/test/com/newrelic/agent/tracers/jasper/testfiles/gt_in_quotes2.html
Actual:
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;meta name=&quot;google-site-verification&quot;	content=&quot;H7LxlilrDfbkX34sqq1X1JwoSCX0c6v15HhUYx49YtE&quot; /&gt;&lt;meta name=&quot;ms&lt;validate&gt;.01&quot; content=&quot;9174ACA637FC44E24AD81253FF836544&quot; /&gt;&lt;!-- &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=7&quot; /&gt;    --&gt;&lt;!--    this is a comment    &lt;META name=&quot;y_key&quot; content=&quot;fa8a87d87826e3f6&quot; /&gt;    --&gt;&lt;title&gt;OPT&amp;reg;&lt;/title&gt; 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingHeaderForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;script language=&quot;javascript&quot;&gt;    function openMariaVideo { }    &lt;/script&gt;&lt;/head&gt;&lt;body&gt;Cribbed from the Java agent 
try {
  java.lang.Class __nrClass = Class.forName(&quot;com.newrelic.api.agent.NewRelicApiImplementation&quot;);
  java.lang.reflect.Method __nrMethod = __nrClass.getMethod(&quot;getBrowserTimingFooterForContentType&quot;, new Class[]{ String.class });
  out.write((String) __nrMethod.invoke(null, new Object[]{ null }));
} catch (Throwable __t) {
}
&lt;/body&gt;&lt;/html&gt;
</pre>
</span>
</div>
</div>
<div id="footer">
<p>
<div>
<label class="hidden" id="label-for-line-wrapping-toggle" for="line-wrapping-toggle">Wrap lines
<input id="line-wrapping-toggle" type="checkbox" autocomplete="off"/>
</label>
</div>Generated by 
<a href="http://www.gradle.org">Gradle 7.5.1</a> at Jun 2, 2023 6:03:57 PM</p>
</div>
</div>
</body>
</html>
